<html><head>






<!-- End Wayback Rewrite JS Include -->

<title>
Squid Users Guide
</title>
</head>
<body bgcolor="#ffffff" link="#990000" vlink="#660000" alink="#660000">

<!-- HEADLINE1 START-->
<table width="100%" border="0">
<tbody><tr>
<td bgcolor="9966ff"><font size="+3" color="FFFFFF"><b>
More Configuration Details
</b></font></td>
<td bgcolor="BB99FF" width="5%">
<font color="BB99FF">_</font>
</td>
<td bgcolor="DDCCFF" width="5%">
<font color="DDCCFF">_</font>
</td>
<td bgcolor="F0E0FF" width="5%">
<font color="F0E0FF">_</font>
</td>
</tr>
<tr>
<td bgcolor="9966ff" link="FFFFFF" valign="BASELINE">
<font size="-1" color="#FFFFFF" acolor="#FFFFFF">
<a href="/jwu.org/squid/welcome.html" style=""><img src="/jwu.org/squid/images/index.gif" align="BOTTOM" border="0">INDEX</a>
<a href="/jwu.org/squid/detail/acl.html" style=""><img src="/jwu.org/squid/images/back.gif" align="BOTTOM" border="0">BACK</a>
<a href="/jwu.org/squid/detail/accel.html" style=""><img src="/jwu.org/squid/images/next.gif" align="BOTTOM" border="0">NEXT</a>
</font>
</td>
<td bgcolor="BB99FF" width="5%">
<font color="BB99FF">_</font>
</td>
<td bgcolor="DDCCFF" width="5%">
<font color="DDCCFF">_</font>
</td>
<td bgcolor="F0E0FF" width="5%">
<font color="F0E0FF">_</font>
</td>
</tr>
</tbody></table>
<!--HEADLINE1 END-->
<p>

<!--HEADLINE2 START-->
<table width="100%" border="0">
<tbody><tr><td bgcolor="CCCCFF">
<font size="+1" face="arial,helvetica"><b>
Advanced client configuration
</b></font>
</td><td>
</td></tr></tbody></table>
<!--HEADLINE2 END-->

<font face="arial,helvetica">
Firstly: as with the <a href="/jwu.org/squid/initial/client.html" style="">previous</a> section on
client configuration, A lot of this is taken from the FAQ, so I will be happy
to list you in the credits section if you contributed this.
</font></p><p><font face="arial,helvetica">
This section covers what is known as <b>Auto-Configuration</b> of the
client. This function of some browsers is <b>very</b> useful in certain
cases. With it you can do things like:
</font></p><p><font face="arial,helvetica">
</font></p><ul><font face="arial,helvetica">
<li>Choose what Cache to connect to based on the client's IP address
</li><li>Choose to connect directly to a machine based on it's name, or the
	client's IP.
</li><li>Connect to different cache machines based on the protocol the person
	is using.
</li></font></ul><font face="arial,helvetica">
<p>
The client machines download the script when they startup from a
web server. This web server has to serve the file as a different
<b>mime-type</b>. The Auto-Config script is normally
a <b>.pac</b> file, so if you aren't already using this for something else
you should put the mime type in your mime config
file for your web server.
</p><p>
In apache (for example) put the following in your <i>mime.types</i> file
</p><p></p><pre>application/x-ns-proxy-autoconfig pac
</pre>
<p></p>

Two clients currently allow <b>Auto-Configuration</b>,
Netscape and Internet Explorer 3.02.
Bear in mind that this java script is run for
each URL that the browser connects to (The client has to decide if it should
connect to any given URL directly or via the cache - so if you connect to
your intranet it does a different thing to if you connect to a site
<i>on the outside</i> This can slow down the browser if you do things
like <b>DNS</b> lookups, which can take a while and thus add a delay
to each URL the person goes to.
<p>
</p><hr>
<font size="+1"><b>Netscape 3</b></font>
<p>
Select Network Preferences from the Options menu. On the Proxies
page, click the radio button next to <i>Automatic Proxy Configuration</i>
and then fill in the URL for your JavaScript proxy configuration file in
the text box. The box is normally too small, but the text will scroll to
the right as you go. 

<a href="/squid.nlanr.net/squid/faq/navigator-auto.jpg" style="pointer-events: none;">Here</a>
is a screen shot of the Netscape Navigator automatic proxy configuration
screen. You may also wish to consult Netscape's documentation for the
Navigator JavaScript proxy configuration system, 
<a href="/home.netscape.com/eng/mozilla/2.0/relnotes/demo/proxy-live.html " style="pointer-events: none;">here</a>
</p><hr>
<font size="+1"><b>Internet Explorer</b></font>
<p>
Bear in mind that only the later versions of Internet Explorer support
this function. You may have to upgrade to get the followin menus.
</p><p>
Select Options from the View menu. Click on the Advanced tab. In the lower
left-hand corner, click on the Automatic Configuration button. Fill in the
URL for your JavaScript file in the dialog box it presents you. Then exit
MSIE and restart it for the changes to take effect. MSIE will reload the
JavaScript file every time it starts. (Netscape has a Reload buttion that
you can press to get it to update).
</p><p>
</p><hr>
<font size="+1"><b>The Java Script</b></font>
<p>
Here is a sample auto configuration JavaScript:
</p><p>
</p><pre>//We (www.is.co.za) run a central cache for our customers that they
//access through a firewall - thus if they want to connect to their intranet
//system (or anything in their domain at all) they have to connect
//directly - hence all the "fiddling" to see if they are trying to connect
//to their local domain.

//Replace each occurrence of company.com with your domain name
//and if you have some kind of intranet system, make sure
//that you put it's name in place of "internal" below.

//We also assume that your cache is called "cache.company.com", and
//that it runs on port 8080. Change it down at the bottom.

    function FindProxyForURL(url, host)
        {
            //If they have only specified a hostname, go directly.
            if (isPlainHostName(host))
                    return "DIRECT";

            //These connect directly if the machine they are trying to
            //connect to starts with "intranet" - ie http://intranet
            //Connect  directly if it is intranet.*
            //If you have another machine that you want them to
            //access directly, replace "internal*" with that
            //machine's name
            if (shExpMatch( host, "intranet*")||
                            shExpMatch(host, "internal*"))
                return "DIRECT";

            //Connect directly to our domains (NB for Important News)
            if (dnsDomainIs( host,"company.com")||
            //If you have another domain that you wish to connect to
            //directly, put it in here
                            dnsDomainIs(host,"sistercompany.com"))
                return "DIRECT";

            //So the error message "no such host" will appear through the
            //normal Netscape box - less support queries :)
            if (!isResolvable(host))
                    return "DIRECT";

            //We only cache http, ftp and gopher
            if (url.substring(0, 5) == "http:" ||
                            url.substring(0, 4) == "ftp:"||
                            url.substring(0, 7) == "gopher:")

            //Change the ":8080" to the port that your cache
            //runs on, and "cache.company.com" to the machine that
            //you run the cache on
                    return "PROXY cache.company.com:8080; DIRECT";

            //We don't cache WAIS
            if (url.substring(0, 5) == "wais:")
                    return "DIRECT";

            else
                    return "DIRECT";
        }
</pre>
</font><p><font face="arial,helvetica">
You should copy the above script to a directory on a web server in a
place that is easy to remember, <i>http://www.mycompany.com/cache.pac</i>
might be a good place.

</font>

</p><p>
</p><hr>
<font size="-1"><p>
<i>The Squid Users guide is copyright Oskar Pearson <a href="mailto:oskar@is.co.
za" style="pointer-events: none;">oskar@is.co.za</a></i></p></font><p><font size="-1"><i>
If you like the layout (I do), I can only thank William Mee
and hope he forgives me for stealing it</i>

</font>



</p>
</body><!-- https://web.archive.org/web/20010425190359if_/http://www.jwu.org:80/squid/detail/client.html --></html><!--
     FILE ARCHIVED ON 19:03:59 Apr 25, 2001 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 04:02:34 Feb 24, 2026.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--><!--
playback timings (ms):
  captures_list: 0.506
  exclusion.robots: 0.034
  exclusion.robots.policy: 0.024
  esindex: 0.009
  cdx.remote: 20.773
  LoadShardBlock: 106.241 (3)
  PetaboxLoader3.datanode: 223.593 (4)
  load_resource: 224.69
  PetaboxLoader3.resolve: 99.653
-->